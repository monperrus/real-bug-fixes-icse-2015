{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12346905","self":"https://issues.apache.org/jira/rest/api/latest/issue/12346905","key":"DERBY-1610","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-08-20 09:45:25.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22597","customfield_12310222":"1_*:*_1_*:*_25993620743_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2007-05-27T03:49:15.743+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1610/watchers","watchCount":0,"isWatching":false},"created":"2006-07-30T07:22:15.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"27.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12313143","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313143","type":{"id":"10032","name":"Blocker","inward":"is blocked by","outward":"blocks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"},"outwardIssue":{"id":"12346249","key":"DERBY-1535","self":"https://issues.apache.org/jira/rest/api/2/issue/12346249","fields":{"summary":"Trial 2 for DERBY-550, improve use of Engine from NetworkServer and reduce memory usage","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png","name":"Sub-task","subtask":true}}}},{"id":"12313144","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313144","type":{"id":"10032","name":"Blocker","inward":"is blocked by","outward":"blocks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"},"outwardIssue":{"id":"12346417","key":"DERBY-1559","self":"https://issues.apache.org/jira/rest/api/2/issue/12346417","fields":{"summary":"when receiving a single EXTDTA object representing a BLOB, the server do not need to read it into memory before inserting it into the DB","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png","name":"Sub-task","subtask":true}}}},{"id":"12313154","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313154","type":{"id":"10032","name":"Blocker","inward":"is blocked by","outward":"blocks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"},"outwardIssue":{"id":"12314092","key":"DERBY-550","self":"https://issues.apache.org/jira/rest/api/2/issue/12314092","fields":{"summary":"BLOB : java.lang.OutOfMemoryError with network JDBC driver (org.apache.derby.jdbc.ClientDriver)","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12316179","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12316179","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"outwardIssue":{"id":"12370338","key":"DERBY-2704","self":"https://issues.apache.org/jira/rest/api/2/issue/12370338","fields":{"summary":"There exists difference of handling NULL value in getXXXXStream/getBlob/getClob methods between Embedded and NetworkClient/Server","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"New"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12313670","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313670","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"outwardIssue":{"id":"12345802","key":"DERBY-1501","self":"https://issues.apache.org/jira/rest/api/2/issue/12345802","fields":{"summary":"PreparedStatement#setNull(int parameterIndex, int sqlType) throws SQL Exception if given sqlType is LONGVARBINARY in embedded mode","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12313669","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313669","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"outwardIssue":{"id":"12345682","key":"DERBY-1494","self":"https://issues.apache.org/jira/rest/api/2/issue/12345682","fields":{"summary":"PreparedStatement.setNull(int, int) checks type compatibility on embedded, but not on the client","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12312954","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12312954","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"inwardIssue":{"id":"32841","key":"DERBY-310","self":"https://issues.apache.org/jira/rest/api/2/issue/32841","fields":{"summary":"Document and/or change Derby client code to match behavior with Embedded driver where possible.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}},{"id":"12315340","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12315340","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12364533","key":"DERBY-2430","self":"https://issues.apache.org/jira/rest/api/2/issue/12364533","fields":{"summary":" setObject(int targetType, Blob source) and setObject(int targetType, Clob source) should disallow updates on all targetTypes except BLOB and CLOB respectively","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png","name":"Sub-task","subtask":true}}}},{"id":"12313710","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313710","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12352066","key":"DERBY-1904","self":"https://issues.apache.org/jira/rest/api/2/issue/12352066","fields":{"summary":"COALESCE with NULL parameter problem","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.png","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12313762","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313762","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12352709","key":"DERBY-1942","self":"https://issues.apache.org/jira/rest/api/2/issue/12352709","fields":{"summary":"There exists difference between behavior of  setNull(Types.TIME) and setTiime(null).","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12313757","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313757","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12352552","key":"DERBY-1938","self":"https://issues.apache.org/jira/rest/api/2/issue/12352552","fields":{"summary":"Add support for setObject(<arg>, null)","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}},{"id":"12316365","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12316365","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12370709","key":"DERBY-2743","self":"https://issues.apache.org/jira/rest/api/2/issue/12370709","fields":{"summary":"Run 10.2 tests against 10.3 and evaluate to identify incompatibilities","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/task.png","name":"Task","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-01-21T17:49:07.813+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11690","id":"11690","name":"Network Client"},{"self":"https://issues.apache.org/jira/rest/api/2/component/11410","id":"11410","name":"Network Server"}],"timeoriginalestimate":null,"description":"There exists difference of type compatibility between  Embedded and NetworkServer/NetworkClient.\nThis issue tries to resolve it.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"37558","summary":"Resolve difference of type compatibility between Embedded and NetworkServer/NetworkDriver","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10101","value":"Release Note Needed","id":"10101"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":104,"total":104,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12424362","id":"12424362","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Result of the execution is as next :\r\n\r\nIn the case of Network Client/Server :\r\nnaka@rufelza:~/derby/test/20060730$ java TestNullChar\r\nstreamAsNull:\r\nnull\r\nsetNull:\r\nnull\r\n\r\nIn the case of Engine :\r\nnaka@rufelza:~/derby/test/20060730$ java TestNullChar embedded\r\nstreamAsNull:\r\njava.sql.SQLException: An attempt was made to get a data value of type 'CHAR' from a data value of type 'java.io.InputStream'.\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:44)\r\n\tat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:88)\r\n\tat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:94)\r\n\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:180)\r\n\tat org.apache.derby.impl.jdbc.EmbedConnection.newSQLException(EmbedConnection.java:1958)\r\n\tat org.apache.derby.impl.jdbc.ConnectionChild.newSQLException(ConnectionChild.java:153)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.dataTypeConversion(EmbedPreparedStatement.java:1611)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.checkBinaryStreamConditions(EmbedPreparedStatement.java:923)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.setBinaryStream(EmbedPreparedStatement.java:839)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.setBinaryStream(EmbedPreparedStatement.java:853)\r\n\tat TestNullChar.updateStreamAsNull(TestNullChar.java:118)\r\n\tat TestNullChar.main(TestNullChar.java:46)\r\njava.sql.SQLException: Invalid cursor state - no current row.\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:44)\r\n\tat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:88)\r\n\tat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:104)\r\n\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:168)\r\n\tat org.apache.derby.impl.jdbc.EmbedConnection.newSQLException(EmbedConnection.java:1952)\r\n\tat org.apache.derby.impl.jdbc.ConnectionChild.newSQLException(ConnectionChild.java:147)\r\n\tat org.apache.derby.impl.jdbc.EmbedResultSet.checkOnRow(EmbedResultSet.java:325)\r\n\tat org.apache.derby.impl.jdbc.EmbedResultSet.getColumn(EmbedResultSet.java:4378)\r\n\tat org.apache.derby.impl.jdbc.EmbedResultSet.getString(EmbedResultSet.java:680)\r\n\tat TestNullChar.updateStreamAsNull(TestNullChar.java:139)\r\n\tat TestNullChar.main(TestNullChar.java:46)\r\nsetNull:\r\nnull","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-07-30T07:26:44.000+0000","updated":"2006-07-30T07:26:44.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12424366","id":"12424366","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Using jdb, I found that next code is executed at NetworkServer in both case of setBinaryStream method with null and setNull method.\r\n\r\nStep completed: \"thread=DRDAConnThread_3\", org.apache.derby.impl.drda.DRDAConnThread.parseSQLDTA_work(), line=4,047 bci=722\r\n4,047                                                                          ps.setNull(i+1, pmeta.getParameterType(i+1));\r\n\r\nI think current implementation of NetworkClient/NetworkServer handle them in same way both to call setBinaryStream method with null value and to call of setNull method.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-07-30T07:38:34.000+0000","updated":"2006-07-30T07:38:34.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12424368","id":"12424368","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I think current behavior of Engine is reasonable.\r\n\r\nWhen setNull method was called, type information of the null value is specified.\r\nThen, Engine can determine whether the type of null value is acceptable.\r\n\r\nOn the other hand, when setBinaryStream method was called, type information of the null value is not specified.\r\nThen Engine does not have any other way other than takeing the null value as incompatible type error.\r\n\r\n \r\nNow questionable part is implementation of NetworkClient/NetoworkServer around type of value, especially null value.\r\nCurrent behavior looks like as if NetworkClient/NetworkServer ignore type of null value.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-07-30T07:50:21.000+0000","updated":"2006-07-30T07:50:21.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12424892","id":"12424892","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I surveyed execution of Network Server with jdb when TestNullChar.java was executed.\r\nIn both of updateStreamAsNull and setNull, type information at server side was as next.\r\n\r\nDRDAConnThread_3[1] dump pmeta.types[0].typeId.baseTypeId\r\n pmeta.types[0].typeId.baseTypeId = {\r\n    SQLTypeName: \"CHAR\"\r\n    JDBCTypeId: 1\r\n    formatId: 17\r\n    wrapperTypeFormatId: 5\r\n}\r\n\r\nIt is very questionable that type is regarded as char when InputStream was passed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-01T15:07:20.000+0000","updated":"2006-08-01T15:07:20.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12425235","id":"12425235","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Reading the code, it seems that NetworkServer recognize the type of the parameter, according to the SQL and not according to the method which passes the parameter value.\r\n\r\nSQL to be executed in the TestNullChar.java is as next and type of the parameter is recognized as CHAR.\r\nINSERT INTO NULL_CHAR_TEST(CHAR_VALUE) VALUES(?)\r\n\r\nGround of my reading is that type data is retrieved from Statement and not from FDODSC of SQLDTA.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-02T13:47:21.000+0000","updated":"2006-08-02T13:47:21.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12425527","id":"12425527","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I tried to guess type of java.sql.Type when value was null ,\r\nfrom drdaType as the patch.\r\n\r\nAs the result, the NetClientTest of  jdbcapi/parameterMapping.java was failed and got amount of difference.\r\n\r\nI think this difference is too large to accept.\r\nOriginally, DERBY-1610 was issue around setBinaryStream(null).\r\n\r\nRemembering the original problem, \r\nit was more problematic point of this issue that setBinaryStream(null) to character colum was failed though setBinaryStream(notNull) to character column was successed, than difference between Engine and NetworkServer/NetworkEngine.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-03T14:16:25.000+0000","updated":"2006-08-03T14:16:25.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429244","id":"12429244","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I updated description of this issue in order to make it easy to understand what is the problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-20T04:40:02.000+0000","updated":"2006-08-20T04:40:02.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429247","id":"12429247","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I upload DERBY-160_2.diff.\r\nWith this patch, errors happens in intended cases at jdbcapi/parameterMapping.java.\r\nThat difference of errors in parameterMapping.out is uploaded as parameterMapping.diff too.\r\n\r\nHowever, there remains concerning points in the error.\r\n\r\nIn the case of batch processing, there found next exception like as next.\r\n>   setNull with batching support(BLOB) SQLSTATE(XJ208): org.apache.derby.client.am.BatchUpdateException: Non-atomic batch failure.  The batch was submitted, but at least one exception occurred on an individual member of the batch. Use getNextException() to retrieve the exceptions for specific batched elements.\r\n> SQLSTATE(22005): java.sql.SQLException: Error for batch element #0: An attempt was made to get a data value of type 'CLOB' from a data value of type 'BLOB'.\r\n\r\nI think these errors should be ignored in jdbcapi/parameterMapping.java ,but not sure yet.\r\n\r\nI will continue surveying about them.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-20T05:20:44.000+0000","updated":"2006-08-20T05:20:44.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429256","id":"12429256","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Hi Tomohito,\r\n\r\nThe BatchUpdateException indicates that the error happens when executeBatch() is invoked, not when setXXX() or addBatch() is called. I think this is OK, but it would of course be better if the exception were raised in setXXX().\r\n\r\nIf you want to ignore these errors in parameterMapping.java, you could wrap each call to executeBatch() like this:\r\n\r\ntry {\r\n    psi.executeBatch();\r\n} catch (BatchUpdateException bue) {\r\n    SQLException reason = bue.getNextException();\r\n    throw (reason == null) ? bue : reason;\r\n}\r\n\r\nAlso, do you think a release note is needed for this issue? If I understand correctly, the client driver (and possibly JCC) will throw an exception in situations where they didn't throw an exception before.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-08-20T09:45:25.000+0000","updated":"2006-08-20T09:45:25.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429263","id":"12429263","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"The mystery was the reason why test of setNull generats different error message than not null method in the test.\r\n\r\nI found that method  checkForInvalidConversion(SQLException sqle) was used in the test of setXXX and handles BatchUpdateException.\r\n\r\nThis method was not used in the test of setNull, then BatchUpdateException was simply dumped.\r\n\r\nI think we should use the checkForInvalidConversion(SQLException sqle) method in the case of setNull also.\r\nThen, this exception can be handled correctly in the test program.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-20T14:12:35.000+0000","updated":"2006-08-20T14:12:35.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429265","id":"12429265","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I think release note should be prepared for this issue, \r\nincluding difference originally introduced in DERBY-1535.\r\n\r\nIs it sufficient to write at http://wiki.apache.org/db-derby/TenTwoRelease?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-20T14:19:38.000+0000","updated":"2006-08-20T14:19:38.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429275","id":"12429275","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Adding the Release Note Needed flag to keep it on the release manager's radar.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-08-20T17:06:17.000+0000","updated":"2006-08-20T17:06:17.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429278","id":"12429278","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"With the DERBY-1610_2.diff patch, setBinaryStream(null), setBlob(null) and setNull(Types.BLOB) throw exception if they are called on a parameter of type CHAR, VARCHAR, LONGVARCHAR or CLOB. However, they can still be used to set parameters of other types (for instance SHORT, INTEGER, FLOAT, DOUBLE and TIMESTAMP) to null. I think it would be better and more consistent behaviour if all of these failed as well.\r\n\r\nIn fact, all other setXXX methods can be used to set null values on parameters of all types. I find it a bit unintuitive that only the combinations mentioned above should raise exceptions. Is it possible to make the calcJdbcTypeForNullValue() more complete so that all setXXX(null) calls on parameters of incompatible type throw an exception?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-08-20T17:40:35.000+0000","updated":"2006-08-20T17:40:35.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429286","id":"12429286","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Technically, I think we can make the calcJdbcTypeForNullValue() *more complete*. \r\nHowever, I'm not sure we should do it right now.\r\n\r\nAt first, DERBY-1610 started from side effects of DERBY-1535, improvement of streaming from client to server.\r\nIt was found this side effect of DERBY-1535 has meaning of partial fix for DERBY-310. Then, DERBY-1610 started.\r\n\r\n//Modification of DERBY-1535 will be overwrtten almostly by DERBY-1559.\r\n//However DERBY-1559 has the same side effect as DERBY-1535, because the code of DERBY-1559 passes InputStream object instead of byte array to the Engine as the code of DERBY-1535 does.\r\n\r\nHistorically this issue had meaning of accepting side effect of DERBY-1535 (and DERBY-1559) as partial fix for DERBY-310, at least in my true mind.\r\n\r\nHowever, if it comes to *complete* fix for DERBY-310 around type compatibility, \r\nI concern that throwing many new exceptions may cause large impact to the user, \r\neven if it was the behavior in Embedded mode.\r\n\r\nIf we aim *complete* fix for DERBY-310 around type compatibility, \r\nI think some more carefulness is needed, \r\nbecause sphere to be influenced is pretty large if we aim *completion* ...\r\n\r\n....Well.\r\nI think we need to know what is the carefulness needed in this issue ....\r\n\r\n....Release note .....? may be .......","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-20T18:56:55.000+0000","updated":"2006-08-20T18:56:55.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429368","id":"12429368","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"There will be user impact even if only a few of the incompatible combinations are changed to throw exceptions. Therefore, I think that it is better to fix all of them at once. Fixing only a couple of them makes the current state of the code harder to understand. For instance, I don't understand why setBlob(null) should fail on a CHAR parameter, but succeed on a DOUBLE parameter.\r\n\r\nAlso, I'm not sure whether this type checking should happen on the server. Since the DRDA protocol doesn't preserve which JDBC method was used, and which arguments the user passed in, it might not always have enough information to decide what to do. Another problem with having the check on the server, is that old clients (or jcc clients) running against a new server will also get these new exceptions. Some people might call that a regression.\r\n\r\nIf it is possible to get the type checks on the client instead of on the server, I would prefer that solution. If that is not possible, I think we should only make sure that all setXXX(null) calls work as before DERBY-1535, and delay the change of behaviour until we have found a way to make all calls behave correctly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-08-21T09:34:29.000+0000","updated":"2006-08-21T09:34:29.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429374","id":"12429374","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I see ....\r\nI think opinion of Knut is proper.\r\n\r\nI will rollback DERBY-1535.\r\n\r\nThen, this task is regarded as blocking DERBY-1535/DERBY-1559.\r\nWe need to solve this issue before those issues.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-21T10:09:04.000+0000","updated":"2006-08-21T10:09:04.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429378","id":"12429378","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Because DERBY-1559 passes InputStream to engine instead of byte[] as same as DERBY-1535, \r\nDERBY-1559 stands on precondition that the differences in compatibility of types caused by the patch are accepted.\r\n\r\nTo accept the difference caused by the patch, cases of compatibility of types around difference caused by the patch should be resolved at once, in order to keep the integration in compatibility of type.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-21T10:31:54.000+0000","updated":"2006-08-21T10:31:54.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429387","id":"12429387","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I think we need to fix the range of modification.\r\nMy plan is making compatibility around setBlob(notNull/null) in NetworkServer/NetworkClient as same as that of Embedded.\r\n\r\nPlease give your comment.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-21T10:55:46.000+0000","updated":"2006-08-21T10:55:46.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429390","id":"12429390","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I meant setBinaryStream(notNull/null) also ...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-21T11:06:07.000+0000","updated":"2006-08-21T11:06:07.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429416","id":"12429416","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"By the way, is it really possible to judge the type checks on the client side ?\r\n\r\nThere are only less information about table defiinition at client side.\r\nThen I think we can't check completely at client side....\r\n\r\nI think information about method called at client side is sent to server in DRDA protocol.\r\nOf cource , method information itself cannot be passed directly in DRDA protocol, \r\nthen it must be sent in different semantics, such as type of value.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-21T13:25:53.000+0000","updated":"2006-08-21T13:25:53.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429424","id":"12429424","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Yes, I think you can decide the correct type on the client side. ParameterMetaData (which can be obtained through PreparedStatement.getParameterMetaData()) contains this information.\r\n\r\nTo test, I created a prepared statement with\r\n\r\n        String sql = \"VALUES (\" +\r\n            \"CAST (? AS SMALLINT),\" +\r\n            \"CAST (? AS INTEGER),\" +\r\n            \"CAST (? AS BIGINT),\" +\r\n            \"CAST (? AS VARCHAR(128)),\" +\r\n            \"CAST (? AS CLOB),\" +\r\n            \"CAST (? AS BLOB),\" +\r\n            \"CAST (? AS TIMESTAMP))\";\r\n        PreparedStatement ps = c.prepareStatement(sql);\r\n\r\nI was able to retrieve the correct parameter types with ParameterMetaData.getParameterType() and ParameterMetaData.getParameterTypeName().","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-08-21T14:20:51.000+0000","updated":"2006-08-21T14:20:51.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429425","id":"12429425","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Regarding check on the client side, I found description of PRPSQLSTT in the spec of drda.\r\nIt seems that information for parameter seems to be handled in TYPDEFOVR/TYPDEFNAM.\r\n\r\nIt may be possible to check type at client side in drda. \r\n\r\nHowever not clear about currrent implementation of ClientDriver yet ...\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-21T14:28:50.000+0000","updated":"2006-08-21T14:28:50.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429427","id":"12429427","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Oh...\r\nOur comments were conflicted :)\r\n\r\nI see.\r\nAnyway it seems that I need to work on current implementation of NetworkClient.\r\n\r\nI will try. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-21T14:33:45.000+0000","updated":"2006-08-21T14:33:45.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12429998","id":"12429998","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I read the test class, parameterMapping.java as next.\r\n\r\nThis test is executed for each types on which column of table was created.\r\nTest items executed for each types is as next.\r\n\r\n1. Test of getXXX method for  null value\r\n    setNull is executed as type of column. \r\n    And then test getting from created record in this testing item as each of all types which was prepared in get methods of ResultSet.\r\n\r\n2. Test of getXXX method for none null value\r\n    Correspoindng set method of PreparedStatement for type of column is executed. \r\n    And then test getting from created record in this testing item as each of all types which was prepared in get methods of ResultSet.\r\n    \r\n3. Test of setNull method\r\n     This test item is executed for each of all types (including illegal type which is illegal type value in JDBC).\r\n     Here, call it as the type of this test item group.\r\n3-1. setNull is executed as the type of this test item group. \r\n        And then test getting from created record in this testing item as type of this test item group.\r\n3-2. setNull is executed as the type of this test item group.  And addBatch is executed.\r\n        And then test getting from created record in this testing item as type of this test item group.\r\n        \r\n4 Test of setXXX method\r\n   This test item is executed for each of all types which was provided as set method of PreparedStatement.\r\n   Here, call it as the type of this test item group.\r\n4-1. Set method of the type of this test item group and executeUpdae is executed.\r\n        And then test getting from created record in this testing item as type of column.\r\n        Furthermore tries to set null value using setXXX method if possible in that type.\r\n4-2. Set method of the type of this test item group and executeUpdae is executed. And addBatch is executed.\r\n        And then test getting from created record in this testing item as type of column.\r\n        Furthermore tries to set null value using setXXX method if possible in that type.\r\n        \r\n5 Test of stored procedure\r\n   This test item is for stored procedure. In this test, actual column of table created is not used. But test is done for the type of column as same as 1-4.   \r\n5-1 Stored procedure which have IN INOUT OUT parameters which have type of column is created.\r\n5-2 This test item is executed for all of types.\r\n       Here call it as the type of this test item group.\r\n5-2-1 INOUT parameter is registered by registerOutParameter as the type of this test item group.\r\n5-2-2 OUT parameter is registered by registerOutParameter as the type of this test item gorup.\r\n5-2-3 IN parameter is set as type of column.\r\n5-2-4 Stored procedure is executed.\r\n5-2-5 OUT parameter and INOUT parameter is retrieved as  the type of this test item gorup.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-23T13:20:18.000+0000","updated":"2006-08-23T13:20:18.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12430700","id":"12430700","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I tried to read difference of parameterMapping between Embedded and NetworkServer/NetworkClient, which is uploaded as parameterMapping.diff.betweenEmbedded_and_NetworkServerNetworkClient.\r\n\r\nNexts are the result which I could understand.\r\n\r\n1) Difference around null.\r\n Embedded regards null as different type as imcompatible in many combinations between types while\r\nNetworkServer/NetworkClient regards null as different type in almost all combinations between types.\r\nThis problem seems to exists in both setNull and passing null via setXXXX. \r\n\r\n2) Difference whether set method of BinaryStream/Blob/Clob is accepted to CHAR/VARCHAR/LONG VARCHAR or not.\r\nset method of BinaryStream/Blob/Clob is accepted to CHAR/VARCHAR/LONG VARCHAR typed variable in NetworkServer/NetworkClient \r\nwhile it is not accepted in Embedded.\r\n\r\n3) Difference whether setCharacterStream/setCLob for numeric type is accepted or not.\r\nEmbedded refuse and NetworkServer/NetworkClient accept.\r\nit may be true only when the value can be interpreted as numeric.\r\nFurthermore this may be true in DATE/TIME/DATETIME also if format of value is possible to interpret those types.\r\n\r\n4) Execution of test for storedProcedure\r\nstoredProcedure is not tested in NetworkServer/NetworkClient case.\r\n\r\n5) Execution of test for setObject(Blob/Clob)\r\nsetObject(Blob/Clob) is note tested in NetworkServer/NetworkClient case.\r\n\r\n------------------------------------------------\r\nWhat I couln't understand.\r\nI found questionable message of \"SPECIFIC CHECK OK\" was in some test items of NetworkServer/NetworkClient case.\r\nI could not understand what this message stands for .... \r\nReading the code, it seems that those test items is skipped with this message in some condition, but not sure.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-26T05:28:01.000+0000","updated":"2006-08-26T05:28:01.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12430701","id":"12430701","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I'm thinking to solve each those problem 1) to 5).\r\n(May be more problem will be found in regards with what I couldn't understand...)\r\n\r\nIn concern with blocking improvement of streaming,\r\nI think 2) should be the first to be solved....","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-26T05:33:37.000+0000","updated":"2006-08-26T05:33:37.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12430702","id":"12430702","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I correct description of 1)...\r\n\r\n1) Difference around null.\r\n- Embedded regards null as different type as imcompatible in many combinations between types while\r\n-NetworkServer/NetworkClient regards null as different type in almost all combinations between types.\r\n+Embedded regards null value typed in different type as imcompatible in many combinations between types while\r\n+NetworkServer/NetworkClient regards them compatible in almost all combinations between types.\r\nThis problem seems to exists in both setNull and passing null via setXXXX. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-26T05:52:37.000+0000","updated":"2006-08-26T05:52:37.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12430818","id":"12430818","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I update this issue more general.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-27T03:24:35.000+0000","updated":"2006-08-27T03:24:35.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12431576","id":"12431576","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Reading the org.apache.derby.client.am.PreparedStatement,\r\nI think each set<type name> and setNull method should have type checking implementation. \r\n\r\nIt will resolve problem of 1) and 2) and 3). ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-08-30T12:55:17.000+0000","updated":"2006-08-30T12:55:17.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12432531","id":"12432531","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Now, I'm adding type checking code to org.apache.derby.client.am.PreparedStatement, \r\nand found what is questionable in test of setNull method.\r\n\r\nReading the jdbcapi/parameterMapping.java, \r\nit seems that only exception of \"22005\" is regarded as expected exception in test of setNull method.\r\n\r\nNext is the code of that:\r\n\r\norg.apache.derbyTesting.functionTests.tests.jdbcapi.parameterMapping :\r\n\t\t\t\t // NOW THE SET METHODS\r\n\t\t\t\t System.out.println(\"setNull() with all JDBC Types on \" + SQLTypes[type]);\r\n\t\t\t\t for (int st = 0; st <= jdbcTypes.length + 1; st++) {\r\n\r\n\t\t\t\t\tif (st >= jdbcTypes.length || jdbcTypes[st] != Types.NULL)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// explictily test Types.NULL.\r\n\t\t\t\t\t\t int sqlTypeNull;\r\n\t\t\t\t\t\t if (st == jdbcTypes.length + 1)\r\n\t\t\t\t\t\t\tsqlTypeNull = 235350345; // bad value\r\n\t\t\t\t\t\t else if (st == jdbcTypes.length)\r\n\t\t\t\t\t\t\t sqlTypeNull = Types.NULL;\r\n\t\t\t\t\t\t else\r\n\t\t\t\t\t\t\tsqlTypeNull = jdbcTypes[st];\r\n\r\n\t\t\t\t\t\ts.execute(\"DELETE FROM PM.TYPE_AS\");\r\n\r\n\t\t\t\t\t\tSQLException sqleResult = null;\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tSystem.out.print(\"  setNull(\" + TestUtil.sqlNameFromJdbc(sqlTypeNull) + \") \");\r\n\t\t\t\t\t\t\tpsi.setNull(1, sqlTypeNull);\r\n\t\t\t\t\t\t\tpsi.executeUpdate();\r\n\r\n\t\t\t\t\t\t\tgetValidValue(psq, jdbcTypes[type]); // yes type, not st\r\n\r\n\t\t\t\t\t\t\tSystem.out.println(\"\");\r\n\r\n\t\t\t\t\t\t} catch (SQLException sqle) {\r\n\t\t\t\t\t\t\tsqleResult = sqle;\r\n\t\t\t\t\t\t\tif (\"22005\".equals(sqle.getSQLState()))\r\n\t\t\t\t\t\t\t\tSystem.out.println(\"IC\");\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tdumpSQLExceptions(sqle);\r\n\r\n\t\t\t\t\t\t}\r\n\r\nThe error of 22005 was found in SQLState as next.\r\n\tString LANG_DATA_TYPE_GET_MISMATCH                                 = \"22005\"; // same 22005 error\r\n\r\nThe name of this variable told that this exception is thrown from get method.\r\n\r\nHowever, this part of the test is setNull test and not test of get method.\r\nIs it mean that setNull method does not throw any exception caused by incompatible type ?\r\n\r\n//Well... reading http://db.apache.org/derby/docs/dev/ref/rrefsqlj19433.html#rrefsqlj19433__sqlj18370, \r\n//it is told that NULL is an untyped constant representing the unknown value.\r\n//Then, it may be natural consequence setNull method does not throw any exception for  incompatible type...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-04T17:41:36.000+0000","updated":"2006-09-04T17:41:36.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12432568","id":"12432568","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"LANG_DATA_TYPE_GET_MISMATCH is not the only exception with SQLState 22005. From SQLState.java:\r\n\r\n\tString LANG_DATA_TYPE_GET_MISMATCH                                 = \"22005\"; // same 22005 error\r\n    String UNSUPPORTED_ENCODING                                        = \"22005.S.1\";\r\n    String CHARACTER_CONVERTER_NOT_AVAILABLE                           = \"22005.S.2\";\r\n    String CANT_CONVERT_UNICODE_TO_EBCDIC                              = \"22005.S.3\";\r\n    String NET_UNRECOGNIZED_JDBC_TYPE                                  = \"22005.S.4\";\r\n    String NET_INVALID_JDBC_TYPE_FOR_PARAM                             = \"22005.S.5\";\r\n    String UNRECOGNIZED_JAVA_SQL_TYPE                                  = \"22005.S.6\";\r\n\r\n\".S.X\" is only used internally and not part of the SQL state, so all of these have SQL state 22005.\r\n\r\nEmbedPreparedStatement.setNull() calls EmbedPreparedStatement.dataTypeConversion() to generate a data conversion exception. In fact, dataTypeConversion() uses SQLState.LANG_DATA_TYPE_GET_MISMATCH. This means the error message is inaccurate for the setters (An attempt was made to get a data value of type ''{0}'' from a data value of type ''{1}''.), but the SQL state is correct.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-09-05T05:16:53.000+0000","updated":"2006-09-05T05:16:53.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12433144","id":"12433144","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I added type compatibility checking code to PreparedStatement class.\r\n\r\nThe parameterMapping_3.diff is the difference between Embedded and NetServer/NetClient with DERBY-1610_3.diff.\r\n\r\nNow, I'm examing difference.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-07T15:17:14.000+0000","updated":"2006-09-07T15:17:14.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12433196","id":"12433196","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Hi Tomohito,\r\n\r\nThank you for working on this issue! I have only had a brief look at your patch. It looks like a great start, but I have a couple of questions/comments:\r\n\r\n1) throwLangDataTypeSetException() throws an exception with state XCL12. Does that match embedded? I though embedded used 22005.\r\n2) Would it be possible to have the integer arrays as constants? I think it would be good to avoid allocating a new array for each call to a setter method. Also, it would make the getPossibleTypesForNull() method more compact.\r\n3) checkType() uses Arrays.binarySearch(), which requires that the array is sorted, but I don't think the arrays that are passed in are sorted.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-09-07T18:49:21.000+0000","updated":"2006-09-07T18:49:21.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12434120","id":"12434120","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Hello.\r\n\r\n1) \r\nThe jdbcapi/parameterMapping.java takes both of  XCL12 and 22005 as expected Exception...\r\nWell .. anyway, I wiill test and report it.\r\n\r\nHowever, I'm not sure whether 22005 is reasonable Exception .....\r\n\r\n\r\n2)\r\nTechnically possible.\r\nHowever I think define them as constants will make the code harder to read ...\r\nWell ... avoid allocating a new memory would be much more important for the program ....\r\n\r\n\r\n3)\r\nI sorted the element by hand and the result was hard-coded.\r\nDEBUG code in checkType method proof that they are in correct order.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-12T11:15:31.000+0000","updated":"2006-09-12T11:15:31.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12434135","id":"12434135","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I commented out code to accept XCL12 Exception in parameterMapping.java and execute it with Embedded.\r\n\r\nAttached file is the result.\r\nThere found XCL12 Exception was thrown in some cases.\r\n\r\n\r\nBy the way, I found questionable comment  in parameterMapping.java, as next .\r\n\r\n\tprivate static String checkForInvalidConversion(SQLException sqle)\r\n\t{\r\n\t\tif (sqle == null)\r\n\t\t\treturn null;\r\n\r\n\t\tboolean unknownException = true;\r\n\t\tSQLException e = sqle;\r\n\t\twhile (e != null && unknownException == true)\r\n\t\t{\r\n\t\t\t// XCL12 is temp\r\n\t\t\tif (\"22005\".equals(e.getSQLState()) ||\r\n\t\t\t\t\"XCL12\".equals(e.getSQLState()) ||\r\n\t\t\t\te.getMessage().indexOf(\"Illegal Conv\") != -1)\r\n\t\t\t{\r\n\r\n\r\nIt says that XCL12 is temp .....\r\n\r\nWhat does this comment mean ...?\r\nException of XCL12 is a kind of deprecated existance ..?\r\n\r\nDoes anyone know background about it ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-12T12:14:37.000+0000","updated":"2006-09-12T12:14:37.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12434161","id":"12434161","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I upload DERBY-1610_4.diff.\r\n\r\nDifference from previous patch is \r\nthat this patch avoids allocating int[] object each time when method was called.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-12T13:56:49.000+0000","updated":"2006-09-12T13:56:49.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12434234","id":"12434234","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Thank you for the explanation and the new patch, Tomohito!\r\n\r\nSince the constant arrays are required to be sorted, I think they\r\nshould have a comment saying they must be sorted in case someone needs\r\nto modify them later. Also, I think it would be clearer (and safer) if\r\nthey were defined as\r\n\r\n  CONSTANT = Arrays.sort(new int[] { .... });\r\n\r\nThat would explicitly show that they are sorted. Since the sorting\r\nonly happens when the class is loaded, it shouldn't be a performance\r\nissue.\r\n\r\nAnother small comment is that POSSIBLE_TYPES_IN_SET_XXX is identical\r\nfor boolean, byte, short, int, long, float, double and BigDecimal. It\r\nwould probably be good to use one constant only (for instance,\r\nPOSSIBLE_TYPES_IN_SET_SCALAR). It would reduce the disk and memory\r\nfootprint. The same comment is valid for the\r\nPOSSIBLE_TYPES_FOR_XXX_NULL constants.\r\n\r\n(In fact, for the types mentioned above, the\r\nPOSSIBLE_TYPES_FOR_XXX_NULL constants could also be used by the setXXX\r\nmethods. The only difference between FOR_XXX_NULL and IN_SET_XXX, is\r\nthat the setNull constants contain BIT, TINYINT, NUMERIC and FLOAT\r\nwhereas the setXXX ones don't. Since these types also are compatible\r\nwith int, byte, boolean etc., it wouldn't hurt to add them to the\r\nsetXXX constants.)\r\n\r\nI don't know what is meant by \"XCL12 is temp\" in parameterMapping, but\r\nI assume it's because the one who wrote it meant only one SQL state\r\nshould be used for all conversion errors.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-09-12T18:38:41.000+0000","updated":"2006-09-12T18:38:41.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12435283","id":"12435283","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I upload new patch DERBY-1610_5.diff.\r\n\r\nIn this patch, int[] object of possible types are accessed via PossibleType class.\r\nThe object of this class sort array of possible types when constructed.\r\n\r\nFurthermore objects which have same possible types are unified and \r\nexceptions for incompatible type are unified to that of 22005.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-17T04:59:39.000+0000","updated":"2006-09-17T04:59:39.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12435413","id":"12435413","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Through examing the patch.\r\nI found a problem that Engine throw exception of XCL12 when String typed value is passed to BLOB typed variable though the patch throw exception of 22005 .\r\n\r\nExceptions found in my environment using TestTypeCompatiblity.java are as next.\r\n\r\nnaka@rufelza:~/derby/wok/20060918$ javac TestTypeCompatibility.java\r\nnaka@rufelza:~/derby/wok/20060918$ java TestTypeCompatibility embedded\r\nstreamAsNull:\r\nERROR XCL12: An attempt was made to put a data value of type 'java.lang.String' into a data value of type 'BLOB'.\r\n\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:316)\r\n\tat org.apache.derby.iapi.types.DataType.throwLangSetMismatch(DataType.java:601)\r\n\tat org.apache.derby.iapi.types.DataType.setValue(DataType.java:343)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.setString(EmbedPreparedStatement.java:492)\r\n\tat TestTypeCompatibility.update(TestTypeCompatibility.java:71)\r\n\tat TestTypeCompatibility.main(TestTypeCompatibility.java:45)\r\njava.sql.SQLException: Invalid cursor state - no current row.\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\r\n\tat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:89)\r\n\tat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:105)\r\n\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:169)\r\n\tat org.apache.derby.impl.jdbc.EmbedConnection.newSQLException(EmbedConnection.java:1982)\r\n\tat org.apache.derby.impl.jdbc.ConnectionChild.newSQLException(ConnectionChild.java:148)\r\n\tat org.apache.derby.impl.jdbc.EmbedResultSet.checkOnRow(EmbedResultSet.java:326)\r\n\tat org.apache.derby.impl.jdbc.EmbedResultSet.getColumn(EmbedResultSet.java:4408)\r\n\tat org.apache.derby.impl.jdbc.EmbedResultSet.getString(EmbedResultSet.java:681)\r\n\tat TestTypeCompatibility.update(TestTypeCompatibility.java:92)\r\n\tat TestTypeCompatibility.main(TestTypeCompatibility.java:45)\r\nnaka@rufelza:~/derby/wok/20060918$ \r\n\r\nI'm thinking revive PreparedStatement.throwLangDataTypeSetException method which is commented out in the patch, and use it to throw exception of XCL12 in this case.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-18T06:59:37.000+0000","updated":"2006-09-18T06:59:37.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12435783","id":"12435783","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I found same problem in VARBINARY as in http://issues.apache.org/jira/browse/DERBY-1610#action_12435413...\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-19T13:32:53.000+0000","updated":"2006-09-19T13:32:53.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12436122","id":"12436122","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Although embedded throws XCL12 in some cases, I don't think the client driver needs to do the same. From the comments in parameterMapping, it seems like XCL12 was not meant to be used permanently. I think it would be better if the client consistently threw 22005 for all the type errors. The patch looks good. Perhaps you could add a comment describing the PossibleTypes class?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-09-20T06:13:36.000+0000","updated":"2006-09-20T06:13:36.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12436209","id":"12436209","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Thank you for your reviewing.\r\n\r\nI tried derbyall last night and found several error happens.\r\nI will submit next patch also with the modification for your suggestion.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-20T10:22:18.000+0000","updated":"2006-09-20T10:22:18.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12436536","id":"12436536","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I found problem in test of setNull method in derbynet/csPrepStmt.java.\r\n\r\nIn that test, 16 th value in sql is typed as LONGVARCHAR.\r\nHowever 16th column is typed as DATE....\r\n\r\nI will try to correct this test too ...\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-21T13:54:35.000+0000","updated":"2006-09-21T13:54:35.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12436543","id":"12436543","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I'm not sure the test should be changed. The test intentionally calls setNull() with another type and expects it to succeed. From the conversion tables in appendix B of the JDBC spec, it seems reasonable to expect that setNull(Types.LONGVARCHAR) on a DATE parameter succeeds. (LONGVARCHAR maps into a String object, and setObject(String) is allowed on a DATE parameter. Also, getDate() is allowed on a LONGVARCHAR column, and getString() is allowed on a DATE column.)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-09-21T14:18:03.000+0000","updated":"2006-09-21T14:18:03.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12436554","id":"12436554","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Through examing result, I found another problem, in result of parameterMapping.java at engine itself.\r\n\r\nThe result of setNull(java.sql.Types.TIME) for TIMESTAMP typed variable is regarded as error.\r\nHowever, the result of setTime(null) for TIMESTAMP typed variable is not regarded as error ....\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-21T15:25:24.000+0000","updated":"2006-09-21T15:25:24.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12436555","id":"12436555","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I correct my previous comment in http://issues.apache.org/jira/browse/DERBY-1610#action_12436536.\r\n\r\nIn that test, 16 th value in sql is typed as LONGVARCHAR FOR BIT DATA. \r\n However 16th column is typed as DATE.... \r\n\r\nNot LONGVARCHAR, but LONGVARCHAR FOR BIT DATA.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-21T15:32:05.000+0000","updated":"2006-09-21T15:32:05.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12436557","id":"12436557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I understand Knut's comment at http://issues.apache.org/jira/browse/DERBY-1610#action_12436543.\r\nI found comments in derbynet/csPrepStmt.java told as next.\r\n\r\n// test setNull on different datatypes of the input parameters of PreparedStatement\r\n\r\n\r\nBut I'm not sure about question at http://issues.apache.org/jira/browse/DERBY-1610#action_12436554 yet.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-21T15:38:38.000+0000","updated":"2006-09-21T15:38:38.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12436566","id":"12436566","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Based on Knut's comment at http://issues.apache.org/jira/browse/DERBY-1610#action_12436543, \r\nThe result of parameterMapping.java at enginemay have another problem.\r\n\r\nThis result of parameterMapping.java at engine is inconsistent with the result of derbynet/csPrepStmt.java\r\n\r\nIn the result of parameterMapping.java, \r\nit is regarded as type imcompatible error to call setNull(VARCHAR FOR BIT DATA) for column typed in DATE, though derbynet/csPrepStmt.java expect same processing to be passed.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-21T15:55:49.000+0000","updated":"2006-09-21T15:55:49.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12436568","id":"12436568","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"As I could understand .....\r\n\r\nNow, we have two inconsistency.\r\n\r\n1: Inconsistency in a result of jdbcapi/parameterMapping.java at engine.\r\n    The result of setNull(java.sql.Types.TIME) for TIMESTAMP typed variable is regarded as error. \r\n    However, the result of setTime(null) for TIMESTAMP typed variable is not regarded as error .\r\n    http://issues.apache.org/jira/browse/DERBY-1610#action_12436554\r\n\r\n2: Inconsistency between results of jdbcpai/parameterMapping.java at engine and \r\n     derbynet/csPrepStmt.java.\r\n    Former regards it as error to execute setNull(VARCHAR FOR BIT DATA) for column typed in DATE.\r\n    Though latter regards it as expected.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-21T16:01:46.000+0000","updated":"2006-09-21T16:01:46.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12436793","id":"12436793","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I'm sorry, I didn't notice the \"FOR BIT DATA\" part. I agree with your first comment, that csPrepStmt should be changed. setNull(Date) should fail on a VARCHAR FOR BIT DATA (VARBINARY) parameter. What worried me, was that I thought the test ran under embedded and expected the call to succeed. But it is a derbynet test and doesn't run under embedded, so that should not be a problem.\r\n\r\nI also agree that setNull(Types.TIME) and setTime(null) should behave the same way. Table B-5 in the JDBC spec says that setObject(java.sql.Time) can be used on parameters of type CHAR, VARCHAR, LONGVARCHAR or TIME. I would expect setNull(Types.TIME) and setTime() to accept the same parameter types as setObject(Time).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-09-22T08:50:55.000+0000","updated":"2006-09-22T08:50:55.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12436883","id":"12436883","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Thank you for your concern, Knut.\r\n\r\nI will correct csPrepStmt.java and \r\nunify the behavior of setNull(Types.TIME) and setTiime(null) in NetworkClient in this issue.\r\n\r\nMoreover, I will file it as different issue to unify the behavior of setNull(Types.TIME) and setTiime(null) in engine.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-22T15:20:11.000+0000","updated":"2006-09-22T15:20:11.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12437796","id":"12437796","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I found another inconsistency.\r\n\r\nAt Line 300 in derbynet/callable.java, BLOB is set to  variable typed as VARCHAR(10000) FOR BIT DATA.\r\nHowever, this combination was expected to be failed in jdbcapi/parameterMapping.java.\r\n\r\nI will correct derbynet/callable.java to solve this inconsistency.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-26T10:35:41.000+0000","updated":"2006-09-26T10:35:41.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12438082","id":"12438082","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I upload the patch for DERBY-1610.\r\n\r\n* Description of the patch\r\n   * Type compatibility checking code was added to PreparedStateemnt class in NetworkClient.\r\n   * Consequently, the results in some of the tests werer modified.\r\n      * The result of parameterMapping.out was changed.\r\n         The attached file, parameterMapping.out.diff, shows the difference between Engine and DerbyNetClient after this patch. \r\n      * Through examining the results of the test, I found inconsistency in the tests.\r\n      \r\n* The result of test\r\n   * execute derbyall and found derbyall/derbynetclientmats/derbynetmats.fail.\r\n     However, I confirmed this error is intermittent.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-27T11:01:54.000+0000","updated":"2006-09-27T11:01:54.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12438657","id":"12438657","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Hi Tomohito,\r\n\r\nI tried to test all type combinations on setNull(). Seems like most of the combinations are treated the same way by the client driver and the embedded driver. Great! The only differences I found were:\r\n\r\n1. setNull(LONGVARCHAR) on parameter of type CHAR FOR BIT DATA (Types.BINARY): Client succeeds, embedded fails (state 22005).\r\n2. setNull(LONGVARBINARY) on parameter of type CHAR FOR BIT DATA (Types.BINARY): Embedded succeeds, client fails (state 22005).\r\n3. setNull(LONGVARBINARY) on parameter of type VARCHAR FOR BIT DATA (Types.VARBINARY): Embedded succeeds, client fails (state 22005).\r\n4. setNull(BINARY) on parameter of type LONG VARCHAR FOR BIT DATA (Types.LONGVARBINARY): Embedded succeeds, client fails (state 22005).\r\n5. setNull(TIME) on parameter of TIMESTAMP: Client succeeds, embedded fails (state 22005).\r\n\r\nI believe the embedded driver behaves correctly in these cases, and that the client driver should behave the same way. Do you think so too?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-09-29T07:31:04.000+0000","updated":"2006-09-29T07:31:04.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12438886","id":"12438886","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"1)-4)\r\nTest on parameter of type CHAR FOR BIT DATA/VARCHAR FOR BIT DATA/LONG VARCHAR FOR BIT DATA was not included in parameterMapping.java. \r\n\r\nI agree your suggested line.\r\n\r\n\r\n5)\r\nWell ...  Type compatibility should be strict rather than lenient. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-30T11:36:51.000+0000","updated":"2006-09-30T11:36:51.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12438887","id":"12438887","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Sorry. I took mistaken.\r\n\r\nTest for CHAR FOR BIT DATA/VARCHAR FOR BIT DATA/LONG VARCHAR FOR BIT DATA existed in parameterMapping.java as next. \r\n\r\nCHAR(60) FOR BIT DATA was skipped.\r\nVARCHAR(60) FOR BIT DATA was executed.\r\nLONG VARCHAR FOR BIT DATA was sipped.\r\n\r\nI think here exists something ...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-30T11:45:09.000+0000","updated":"2006-09-30T11:45:09.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12438889","id":"12438889","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"In the parameterMapping.java, tests of setNull on parameter typed VARCHAR FOR BIT DATA (Types.VARBINARY) existed and execued.\r\n\r\nHowever, setNull(LONGVARBINARY) was not tested in those tests.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-09-30T12:06:34.000+0000","updated":"2006-09-30T12:06:34.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12438952","id":"12438952","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Regarding \"1. setNull(LONGVARCHAR) on parameter of type CHAR FOR BIT DATA (Types.BINARY): Client succeeds, embedded fails (state 22005).\", I found derbynet/csPrepStmt.java have problem.\r\n\r\nThe part of setNull in this test tries to setNull(LONGVARCHAR) on 13th column typed as char(23) for bit data.\r\n\r\nI think we need to modify this test program in this point.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-01T00:27:20.000+0000","updated":"2006-10-01T00:27:20.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12438972","id":"12438972","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I found another problem in derbynet/csPrepStmt.java.\r\n\r\nThe part of setNull in this test expect it possible to setNull(TIME) on 18th column typed as TIMESTAMP.\r\nIf nod modified this test, it is impossible to correct \"5. setNull(TIME) on parameter of TIMESTAMP: Client succeeds, embedded fails (state 22005).\" @ http://issues.apache.org/jira/browse/DERBY-1610#action_12438657 .\r\n\r\nI will fix this part in the test too.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-01T12:50:37.000+0000","updated":"2006-10-01T12:50:37.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12439170","id":"12439170","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I upload the patch for DERBY-1610_7.patch \r\n \r\n * Description of the patch \r\n    * Type compatibility checking code was added to PreparedStateemnt class in NetworkClient. \r\n    * Consequently, the results in some of the tests were modified. \r\n       * The result of parameterMapping.out was changed. \r\n          The attached file, parameterMapping.out.7.diff, shows the difference between Engine and DerbyNetClient after this patch. \r\n       * Through examining the results of the test, I found inconsistency in the tests and solve it. \r\n\r\n * Difference from previous patch\r\n   *  Problems 1)-5) commented in http://issues.apache.org/jira/browse/DERBY-1610#action_12438657 was solved.\r\n\r\n * The result of test \r\n    * execute derbyall and found only error of DERBY-1910.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-02T14:26:29.000+0000","updated":"2006-10-02T14:26:29.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12439477","id":"12439477","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I have run tests of setNull() and setObject() on most type combinations, and I didn't find any inconsistencies. +1 to commit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-10-03T12:42:22.000+0000","updated":"2006-10-03T12:42:22.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12439485","id":"12439485","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Thank you for your persistent follow-up !\r\n\r\nI will commit the patch after 10.2 is released.\r\n\r\nThis patch have much impact on behavior of NetworkClient driver and \r\nI think it should not be committed in rush. \r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-03T12:59:06.000+0000","updated":"2006-10-03T12:59:06.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12439547","id":"12439547","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Is this issue related to the issue discussed in DERBY-1904, specifically:\r\nhttp://issues.apache.org/jira/browse/DERBY-1904?page=comments#action_12439484\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-10-03T15:57:44.000+0000","updated":"2006-10-03T15:57:44.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440655","id":"12440655","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Committed.\r\n\r\nSending        java/client/org/apache/derby/client/am/PreparedStatement.java\r\nSending        java/testing/org/apache/derbyTesting/functionTests/master/DerbyNet/callable.out\r\nSending        java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/blobclob4BLOB.out\r\nSending        java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/callable.out\r\nSending        java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/parameterMapping.out\r\nSending        java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/callable.java\r\nSending        java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/csPrepStmt.java\r\nSending        java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/parameterMapping.java\r\nTransmitting file data ........\r\nCommitted revision 453886.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-07T11:25:05.000+0000","updated":"2006-10-07T11:25:05.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440667","id":"12440667","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=oysteing","name":"oysteing","emailAddress":"oystein dot grovlen at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ystein Grvlen","active":true},"body":"The latest check-in seems to have introduced an error in callable.java","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=oysteing","name":"oysteing","emailAddress":"oystein dot grovlen at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ystein Grvlen","active":true},"created":"2006-10-07T14:21:25.000+0000","updated":"2006-10-07T14:21:25.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440668","id":"12440668","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=oysteing","name":"oysteing","emailAddress":"oystein dot grovlen at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ystein Grvlen","active":true},"body":"Diff from the tinderbox test:\r\n\r\n********* Diff file derbyall/derbynetmats/DerbyNet/derbynetmats/callable.diff\r\n*** Start: callable jdk1.5.0_07 DerbyNet derbynetmats:derbynetmats 2006-10-07 14:02:10 ***\r\n34d33\r\n< execute the procedure with BLOB\r\nTest Failed.\r\n*** End:   callable jdk1.5.0_07 DerbyNet derbynetmats:derbynetmats 2006-10-07 14:02:16 ***","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=oysteing","name":"oysteing","emailAddress":"oystein dot grovlen at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ystein Grvlen","active":true},"created":"2006-10-07T14:23:39.000+0000","updated":"2006-10-07T14:23:39.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440671","id":"12440671","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Sorry for the regression ....\r\n\r\nI updated next 2 callable.out file in patch.\r\nnaka@rufelza:~/derby/dev/trunk$ grep Index: DERBY-1610_7.patch | grep callable.out\r\nIndex: java/testing/org/apache/derbyTesting/functionTests/master/DerbyNet/callable.out\r\nIndex: java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/callable.out\r\n\r\nHowever, there exists next 4 callable.out file \r\nnaka@rufelza:~/derby/dev/trunk$ find -name \"callable.out\"\r\n./java/testing/org/apache/derbyTesting/functionTests/master/DerbyNet/jdk15/callable.out\r\n./java/testing/org/apache/derbyTesting/functionTests/master/DerbyNet/callable.out\r\n./java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/jdk15/callable.out\r\n./java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/callable.out\r\n\r\nNext 2 out file needs to be updated.\r\n./java/testing/org/apache/derbyTesting/functionTests/master/DerbyNet/jdk15/callable.out and \r\n./java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/jdk15/callable.out\r\n\r\nI will fix it soon.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-07T14:37:38.000+0000","updated":"2006-10-07T14:37:38.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440673","id":"12440673","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"This patch updates next 2 files\r\nnaka@rufelza:~/derby/dev/trunk$ grep Index: DERBY-1610_7_regressionfix.patch \r\nIndex: java/testing/org/apache/derbyTesting/functionTests/master/DerbyNet/jdk15/callable.out\r\nIndex: java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/jdk15/callable.out\r\n\r\nI will test this patch with jdk15","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-07T14:43:49.000+0000","updated":"2006-10-07T14:43:49.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440675","id":"12440675","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I committed.\r\n\r\nSending        java/testing/org/apache/derbyTesting/functionTests/master/DerbyNet/jdk15/callable.out\r\nSending        java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/jdk15/callable.out\r\nTransmitting file data ..\r\nCommitted revision 453922.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-07T14:55:35.000+0000","updated":"2006-10-07T14:55:35.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440677","id":"12440677","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"In addition to the derbyall test, the compatibility test seems to be failed after this patch. \r\nhttp://www.multinet.no/~solberg/public/Apache/TinderBox_Derby/Limited/testSummary-453887.html \r\n\r\nI will see what happen.\r\n\r\nHowever, jdk13 can't work at my site.\r\nThen, I will use ibm13 instead .....","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-07T15:08:36.000+0000","updated":"2006-10-07T15:08:36.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440684","id":"12440684","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I think I could find reason for compatibility error ....\r\nNext error was found in serverVM-1.3_serverTrunk_clientVM-1.3_clientTrunk when compatibility test was executed and failed.\r\n\r\n.E.\r\nTime: 2.974\r\nThere was 1 error:\r\n1) testJDBCDriver(org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.JDBCDriverTest)java.lang.NoClassDefFoundError: java/sql/ParameterMetaData\r\n\tat java.lang.ClassLoader.defineClass0(Native Method)\r\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:703)\r\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:133)\r\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:320)\r\n\tat java.net.URLClassLoader.access$400(URLClassLoader.java:93)\r\n\tat java.net.URLClassLoader$ClassFinder.run(URLClassLoader.java:678)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:239)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:516)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:460)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:448)\r\n\tat org.apache.derby.client.net.ClientJDBCObjectFactoryImpl.newParameterMetaData(ClientJDBCObjectFactoryImpl.java:348)\r\n\tat org.apache.derby.client.am.PreparedStatement.getParameterMetaDataX(PreparedStatement.java:1774)\r\n\tat org.apache.derby.client.am.PreparedStatement.getParameterMetaData(PreparedStatement.java:1759)\r\n\tat org.apache.derby.client.am.PreparedStatement.setInt(PreparedStatement.java:562)\r\n\tat org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.JDBCDriverTest.setRow(JDBCDriverTest.java:655)\r\n\tat org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.JDBCDriverTest.stuffTable(JDBCDriverTest.java:377)\r\n\tat org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.JDBCDriverTest.datatypesTest(JDBCDriverTest.java:281)\r\n\tat org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.JDBCDriverTest.testJDBCDriver(JDBCDriverTest.java:258)\r\n\tat org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.CompatibilitySuite.main(CompatibilitySuite.java:138)\r\n\r\nFAILURES!!!\r\nTests run: 2,  Failures: 0,  Errors: 1\r\n\r\n\r\nReading javadoc for ParameterMetadata interface, I found we can use this class after jdk.1.4.\r\nhttp://java.sun.com/j2se/1.4.2/docs/api/java/sql/ParameterMetaData.html\r\n\r\nI think using ParameterMetadata is reason why compatibility suite was failed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-07T16:18:23.000+0000","updated":"2006-10-07T16:18:23.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440685","id":"12440685","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Reading the code, I think I can use org.apache.derby.client.am.ColumnMetaData instead of ParameterMetadata.\r\n\r\nI will fix it too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-07T16:24:08.000+0000","updated":"2006-10-07T16:24:08.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440686","id":"12440686","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"This patch stop getting type information via Interface java.sql.ParameterMetaData, which can be used only after jdk 1.4, inside PreparedStatement class.\r\nInstead, type information is gotten from org.apache.derby.client.am.ColumnMetaData directly.\r\n\r\nNow I will examine patch with derbyall ...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-07T16:44:29.000+0000","updated":"2006-10-07T16:44:29.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440687","id":"12440687","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"And compatibility test also ....","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-07T16:49:43.000+0000","updated":"2006-10-07T16:49:43.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440688","id":"12440688","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"It appears that you are working on making this change compatible with JDK 1.3.\r\n\r\nI thought we had decided that the trunk no longer worked with JDK 1.3?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-10-07T16:54:16.000+0000","updated":"2006-10-07T16:54:16.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440716","id":"12440716","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"At least, current lateest release support JDK1.3.\r\nhttp://db.apache.org/derby/releases/release-10.2.1.6.cgi#Release%20Overview\r\n\r\nAnd phenomena would make it almost completely impossilbe to run DerbyNetClient of next release on JDK 1.3 ...\r\n\r\nI think we have two options.\r\n1) Make DerbyNetClient to work on JDK 1.3 to some extent though not supported officialy.\r\n2) Give up DerbyNetClient to work on JDK 1.3.  DerbyNet (db2jcc.jar) may work as expected ....\r\n\r\nWell ....\r\nI think we need to know how difficult 1) is , at least ...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-08T01:56:23.000+0000","updated":"2006-10-08T01:56:23.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440717","id":"12440717","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Here's a link to the 1.3 discussion on the mailing list:\r\nhttp://www.nabble.com/forum/ViewPost.jtp?post=6610713&framed=y","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-10-08T02:10:03.000+0000","updated":"2006-10-08T02:10:03.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440719","id":"12440719","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"With the patch  DERBY-1610_7_regressionfix_2.patch , \r\nI executed derbyall and compatibility suite.\r\n\r\nThe result was that \r\ncompatibility test was passed and \r\njdbcapi/StmtCloseFunTest.java in DerbyNetClinet of derbyall was failed.\r\n\r\nNext are exceptions found in StmtCloseFunTest.tmp :\r\nPrepared Statement test begin\r\nFAIL -- unexpected exception:java.lang.NullPointerException\r\njava.lang.NullPointerException\r\n\tat org.apache.derby.client.am.PreparedStatement.setInt(PreparedStatement.java:562)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.StmtCloseFunTest.test2(StmtCloseFunTest.java:335)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.StmtCloseFunTest.main(StmtCloseFunTest.java:72)\r\nCallable Statement test begin\r\nThe result is 3\r\nFAIL -- unexpected exception:java.lang.NullPointerException\r\njava.lang.NullPointerException\r\n\tat org.apache.derby.client.am.PreparedStatement.setString(PreparedStatement.java:925)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.StmtCloseFunTest.test3(StmtCloseFunTest.java:577)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.StmtCloseFunTest.main(StmtCloseFunTest.java:73)\r\nStatement Close Fun Test finished\r\n\r\nWhere exception found was around next ....\r\n\r\norg.apache.derbyTesting.functionTests.tests.jdbcapi.StmtCloseFunTest :\r\ntest2 method :\r\n                        ps.setInt(1, 420);\r\n\t\t   \tps.setFloat(2, (float)12.21);\r\n\t\t   \tps.setDate(3, new Date(870505200000L));\r\n\t\t   \tps.setString(4, \"China\");\r\n\t\t   \tps.executeUpdate();\r\n\t\t   \tps.close();\r\n\t\t  \t\t\t\t\r\n\t\t\t//now, we begin the test\r\n\t\t\ttry {\r\n\t\t\t\tps.setInt(1, 530);\r\n\t\t\t\tSystem.out.println(\"Prepared Statement Test failed\");\r\n\t\t\t}\r\n\t\t\tcatch(SQLException e) { }\r\n\r\ntest3 method :\r\n\t\t\t\tcs = conn.prepareCall(\"call takesString(?,?)\");\r\n\t\t\t\r\n\t\t\t\tcs.registerOutParameter(1, Types.CHAR);\r\n\t\t\t\tcs.setInt(2, Types.INTEGER);\r\n\r\n\t\t\t\tcs.execute();\r\n\t\t\t\tSystem.out.println(\"The result is \" + cs.getString(1));\r\n\r\n\t\t\t\tcs.close();\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tcs.setString(1, \"ABC\");\r\n\t\t\t\t\tSystem.out.println(\"Callable Statement Test failed\");\r\n\t\t\t\t}\r\n\t\t\t\tcatch(SQLException e) { }\r\n\r\nIt seems that program throw NullPointerExceptioon \r\nbecause method of instance variable ,parameterMetaData_ , was called \r\nafter Statement was closed and substituted null for parameterMetaData_  .\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-08T02:25:12.000+0000","updated":"2006-10-08T02:25:12.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440726","id":"12440726","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I think it is possible to solve problem found in jdbcapi/StmtCloseFunTest.java ...\r\nI will post the patch after derbyall was examined.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-08T03:03:30.000+0000","updated":"2006-10-08T03:03:30.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440733","id":"12440733","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"* Description of the patch\r\n   * This patch resolve error in jdk13 test of compatibility suite.\r\n\r\n* Test \r\n   * execute derbyall and compatibility suite and found no error.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-08T07:33:51.000+0000","updated":"2006-10-08T07:33:51.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440735","id":"12440735","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Committed.\r\n\r\nSending        java/client/org/apache/derby/client/am/PreparedStatement.java\r\nTransmitting file data .\r\nCommitted revision 454098.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-08T07:42:10.000+0000","updated":"2006-10-08T07:42:10.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440806","id":"12440806","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Reading the code, I found problem in the DERBY-1610_7_regressionfix_2_2.patch ...\r\n\r\nIn the case PreparedStatement.escapedProcedureCallWithResult_ is true, \r\nI can't access type information of parameterMetaData_ with original parameter index value.\r\n\r\nAs it is treated in ParameterMetaData, I need to decreaseindex value before access the type information.\r\n\r\nIt seeems that I need to use checkForEscapedCallWithResult method ....","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-09T04:24:43.000+0000","updated":"2006-10-09T04:24:43.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440831","id":"12440831","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"* Description of patch\r\n   * adjust index for parameter using checkForEscapedCallWithResult method.\r\n\r\n* Test \r\n   * execute derbyall and only found intermittent errors.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-09T08:48:10.000+0000","updated":"2006-10-09T08:48:10.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12440832","id":"12440832","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Committed.\r\n\r\nSending        java/client/org/apache/derby/client/am/PreparedStatement.java\r\nTransmitting file data .\r\nCommitted revision 454312.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-09T08:56:09.000+0000","updated":"2006-10-09T08:56:09.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12441109","id":"12441109","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"There are some failures in the jdbc40 suite caused by these changes. I'll post a patch for it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-10-10T09:55:28.000+0000","updated":"2006-10-10T09:55:28.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12441131","id":"12441131","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Attaching a patch which fixes the failures in the jdbc40 suite (see\r\nhttp://www.multinet.no/~solberg/public/Apache/Daily/jvm1.6/testlog/solN+1/454410-derbyall_diff.txt).\r\n\r\nDescription of the patch (derby-1610-jdk16.diff):\r\n\r\n  * Check for unsupported types before checking incompatibilities\r\n    since JDBC 4.0 specifies that SQLFeatureNotSupportedException\r\n    should be raised for certain types if they are unsupported.\r\n\r\n  * Change timing of calls to checkForClosedStatement() to make\r\n    ClosedObjectTest get the expected SQLState when the statement is\r\n    closed.\r\n\r\n  * Add type checking to the JDBC 4.0 length-less blob/clob overloads.\r\n\r\n  * Since the type checking already checks for closed statement and\r\n    invalid parameter index, remove those tests from\r\n    checkSetterPreconditions(). Since the only code that is left in\r\n    checkSetterPreconditions() after the removal of those checks is a\r\n    call to checkForEscapedCallWithResult(), replace all calls to\r\n    checkSetterPreconditions() with calls to\r\n    checkForEscapedCallWithResult().\r\n\r\nI have run derbynetclientmats with no failures. The jdbc40 suite also\r\nruns cleanly (196 failures without the patch).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-10-10T12:02:26.000+0000","updated":"2006-10-10T12:02:26.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12441136","id":"12441136","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Thank you for clean up those.\r\n\r\nI have a concern for checkTypeForSetAsciiStream, checkTypeForSetBlob, checkTypeForSetClob.\r\nI think static method is better than instance methods, \r\nbecause information handled in the static method is clearer ...\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-10T12:57:32.000+0000","updated":"2006-10-10T12:57:32.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12441374","id":"12441374","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Thanks Tomohito. If the methods are static, each setter method must\r\ncall getColumnMetaDataX(), getColumnType() and\r\ncheckForEscapedCallWithResult(). I think it is better to have these\r\ncalls in checkTypeForXXX() because it makes the setters cleaner and\r\nreduces the footprint. Since it reduces the amount of duplicated code,\r\nI think it also makes the code more maintainable.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-10-11T08:05:42.000+0000","updated":"2006-10-11T08:05:42.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12441400","id":"12441400","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I see.\r\nIt would be a descision.\r\n\r\nMy stand point is +0.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2006-10-11T10:37:49.000+0000","updated":"2006-10-11T10:37:49.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12441436","id":"12441436","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"So with your +0 and my +1, the average is +0.5. :) Committed revision 462784.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-10-11T12:12:59.000+0000","updated":"2006-10-11T12:12:59.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12496603","id":"12496603","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Hi Tomohito and Knut Anders,\r\n\r\nIs this issue ready to have a release note written? A comment on DERBY-2430 suggests that a single release note should cover both issues. Is that the plan? Thanks-Rick","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-05-17T15:39:51.388+0000","updated":"2007-05-17T15:39:51.388+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12496619","id":"12496619","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Hi.\r\n\r\nI think release note should be written.\r\nHowever I have a concern around type compatibility of OUT PARAMETER of stored procedure .\r\n\r\n\r\nWhen I implemented this issue, the functionality of setObject(java.sql.Blob)/ setObject(java.sql.Clob)/ \r\nOUT PARAMETER of stored procedure was not implemented in NetworkServer/NetworkClient.\r\n\r\n//Please have a glance on https://issues.apache.org/jira/secure/attachment/12339632/parameterMapping.diff.betweenEmbedded_and_NetworkServerNetworkClient\r\n\r\nBecause those functionality was not same between NetworkServer and NetworkClient, \r\ntype compatibility was *not completely same* between them \r\nthough they are *not different* in the extent where functionality was implemented.\r\n\r\nThe reason why I did not resolve this issue is that I felt concern around them.\r\n\r\nI understand DERBY-2430 resolve my concern around setObject(java.sql.Blob)/ setObject(java.sql.Clob).\r\nThen there still remain OUT PARAMETER of stored procedure.\r\n\r\nI think we need to take the care of not implemented functionality when we wrote release note.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2007-05-17T16:44:03.231+0000","updated":"2007-05-17T16:44:03.231+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12499358","id":"12499358","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Hi,\r\n\r\nThis issue is one of several that is in progress, however, if I understand it correctly, a change that might impact existing applications has already gone in, and will be in for 10.3.\r\n\r\nI too find it important to document this change in behavior in the 10.3 release notes.\r\n\r\nThe way it works, though, is that unless we do something, nothing will show up in the release notes on this.\r\n\r\nWe have a number of choices;\r\n1. adjust/falsify history and change the comment for revision 453886 to belong to for instance DERBY-1501, or maybe DERBY-1494...\r\n2. close this bug as fixed in 10.3 and add the release note here.\r\n\r\nI vote for 2.\r\n\r\nI propose the following:\r\n- log a new bug (if not done already) for the issue with the type incompatibility of OUT parameters for stored procedures and link this new bug to DERBY-310.\r\n- close this bug as fixed in 10.3.\r\n- removing the existing application impact check from DERBY-1501 because no change specific to that bug went into subversion, so a release note seems contrary.\r\n\r\nI understand your concern about giving the impression that all type differences were resolved, but then again, I don't think a release note about a fix is the appropriate place for that. So, I suggest we use verbage that suggests more differences may exist.\r\n\r\nI propose something like the following for the release note, please review & correct:\r\n------------------------------\r\nSummary of Change\r\nDerby's Client implementation will return an appropriate error, matching the behavior with Embedded in the a number of situations related to PreparedStatement.setNull(int, int). \r\n\r\nSymptoms Seen by Applications Affected by Change\r\nIn a number of situations, Derby's client implementation behaved differently from the Embedded implementation:\r\n1. setNull(LONGVARCHAR) on parameter of type CHAR FOR BIT DATA (Types.BINARY).\r\n\tIn previous releases, the Client succeeds, embedded fails (state 22005).\r\n2. setNull(LONGVARBINARY) on parameter of type CHAR FOR BIT DATA (Types.BINARY).\r\n\tIn previous releases, Embedded succeeds, client fails (state 22005).\r\n3. setNull(LONGVARBINARY) on parameter of type VARCHAR FOR BIT DATA (Types.VARBINARY).\r\n\tIn previous releases, Embedded succeeds, client fails (state 22005).\r\n4. setNull(BINARY) on parameter of type LONG VARCHAR FOR BIT DATA (Types.LONGVARBINARY)\r\n\tIn previous releases, Embedded succeeds, client fails (state 22005).\r\n5. setNull(TIME) on parameter of TIMESTAMP. \r\n\tIn previous releases, Client succeeds, embedded fails (state 22005).\r\n\r\n\r\nIncompatibilities with Previous Release\r\nNow, in the cases indicated above, the client and Embedded implementation show the behavior previously shown only with Embedded.\r\n\r\nRationale for Change\r\nDerby's Client implementation and Embedded implementation should behave the same way from the point of view of an application whenever possible.\r\n\r\nApplication Changes Required\r\nApplications relying on the Client behaving in the old way will have to be adjusted.\r\n------------------------------\r\n\r\nIf I do not hear objections, I'll proceed with this plan.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2007-05-26T22:16:49.036+0000","updated":"2007-05-26T22:16:49.036+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12499381","id":"12499381","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I have no objection for your plan on the whole.\r\nI think we should refer to imcompatible type of setXXXXX(null).\r\n\r\n========================\r\nBy the way my concern around OUT PARAMETER of stored procedure seems to be groundless fears.\r\nIt was resolved in DERBY-2381.\r\n\r\n\r\nHowever, reading current ParameterMappingTest, \r\nthere seems to remain difference of handling NULL value in getXXXXStream/getBlob/getClob  \r\n\r\nThe specificCheck method supresses the test for them.\r\n\r\nI will file it and close this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2007-05-27T03:40:16.429+0000","updated":"2007-05-27T03:40:16.429+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12499382","id":"12499382","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Not close but resolve .....","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2007-05-27T03:48:45.714+0000","updated":"2007-05-27T03:48:45.714+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12499449","id":"12499449","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Attaching my attempt at a release note. I have added mention of the setXXX methods. If this is not sufficient, please feel free to attach an updated version of the file.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2007-05-27T21:35:36.709+0000","updated":"2007-05-27T21:35:36.709+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12499584","id":"12499584","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Hello.\r\nI think we should use ol and li element. \r\n\r\nI upload modified one.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2007-05-28T15:05:39.755+0000","updated":"2007-05-28T15:05:39.755+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12499585","id":"12499585","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"Previous html document was very confusing because of same name ....\r\nI upload one with different name again.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2007-05-28T15:08:28.377+0000","updated":"2007-05-28T15:08:28.377+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12499597","id":"12499597","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"body":"I upload again and again for automatically generating the Release Notes. ( see DERBY-2570 )\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=naka","name":"naka","emailAddress":"tomonaka at basil dot ocn dot ne dot jp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohito Nakayama","active":true},"created":"2007-05-28T15:54:07.899+0000","updated":"2007-05-28T15:54:07.899+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12505495","id":"12505495","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"New version of release note: used the angle bracket entities so that <type> would print out as is and not be misconstrued as an unbalanced tag.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-16T17:22:55.141+0000","updated":"2007-06-16T17:22:55.141+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12510846","id":"12510846","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"uploading newer version of release note that has corrected 1 English grammar/editing mistake (\"in the a number of\") and consistently uses Client and Embedded with  first letter uppercased.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2007-07-07T03:36:51.642+0000","updated":"2007-07-07T03:36:51.642+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12510849","id":"12510849","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"It takes a while with that release note to understand what the new behaviour is. \r\n\r\nReplacing text of the form:\r\n\r\n> setNull(LONGVARBINARY) on parameter of type CHAR FOR BIT DATA (Types.BINARY). In previous releases, Embedded succeeds, Client fails (state 22005)\r\n\r\nwith something like\r\n\r\n> These method calls now succeed on both drivers. In 10.2 and earlier releases the client driver threw an exception with SQL state 22005\r\n>\r\n> setNull(Types.LONGVARBINARY) on parameter of type CHAR FOR BIT DATA (Types.BINARY) \r\n> [and other calls]\r\n\r\nmight be clearer","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2007-07-07T04:11:48.965+0000","updated":"2007-07-07T04:11:48.965+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12510892","id":"12510892","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"thx for your input...Except of course that in some of the calls, client has been made to *fail* for both drivers, if that was the correct action....\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2007-07-07T13:02:31.013+0000","updated":"2007-07-07T13:02:31.013+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346905/comment/12510898","id":"12510898","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"attaching another attempt at the release note. Hopefully this is clear now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2007-07-07T13:57:32.467+0000","updated":"2007-07-07T13:57:32.467+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1610/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06sjj:"}}