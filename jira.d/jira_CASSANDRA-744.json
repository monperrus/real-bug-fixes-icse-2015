{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12446705","self":"https://issues.apache.org/jira/rest/api/latest/issue/12446705","key":"CASSANDRA-744","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310865","id":"12310865","key":"CASSANDRA","name":"Cassandra","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310865&avatarId=12034","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310865&avatarId=12034","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310865&avatarId=12034","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310865&avatarId=12034"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11961","id":"11961","description":"Apache Cassandra related projects","name":"Cassandra"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314533","id":"12314533","description":"","name":"0.7 beta 1","archived":false,"released":true,"releaseDate":"2010-08-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2010-04-17 14:55:05.357","customfield_12312322":null,"customfield_12312323":null,"customfield_12310222":"10002_*:*_1_*:*_259016425_*|*_1_*:*_1_*:*_6987726296_*|*_5_*:*_1_*:*_0","customfield_12310420":"19849","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-04-20T14:53:01.203+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-744/watchers","watchCount":2,"isWatching":false},"created":"2010-01-26T17:53:58.482+0000","customfield_10022":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12311124":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slebresne","name":"slebresne","emailAddress":"sylvain at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=slebresne&avatarId=14630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=slebresne&avatarId=14630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=slebresne&avatarId=14630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=slebresne&avatarId=14630"},"displayName":"Sylvain Lebresne","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-05-11T10:25:57.060+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312978","id":"12312978","name":"Core"}],"timeoriginalestimate":null,"description":"both to make it more flexible, and to emphasize that counting \"everything\" is as bad as slicing it","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12442050","id":"12442050","filename":"ASF.LICENSE.NOT.GRANTED--0001-Add-SlicePredicate-to-get_count.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slebresne","name":"slebresne","emailAddress":"sylvain at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=slebresne&avatarId=14630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=slebresne&avatarId=14630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=slebresne&avatarId=14630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=slebresne&avatarId=14630"},"displayName":"Sylvain Lebresne","active":true},"created":"2010-04-17T14:55:05.289+0000","size":4662,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12442050/ASF.LICENSE.NOT.GRANTED--0001-Add-SlicePredicate-to-get_count.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12442051","id":"12442051","filename":"ASF.LICENSE.NOT.GRANTED--0002-Add-mutliget_count.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slebresne","name":"slebresne","emailAddress":"sylvain at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=slebresne&avatarId=14630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=slebresne&avatarId=14630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=slebresne&avatarId=14630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=slebresne&avatarId=14630"},"displayName":"Sylvain Lebresne","active":true},"created":"2010-04-17T14:55:05.329+0000","size":4984,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12442051/ASF.LICENSE.NOT.GRANTED--0002-Add-mutliget_count.patch"}],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"91561","summary":"[multi_]get_count should take a SlicePredicate","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"customfield_12311420":null,"customfield_12311421":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":9,"total":9,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446705/comment/12858150","id":"12858150","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slebresne","name":"slebresne","emailAddress":"sylvain at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=slebresne&avatarId=14630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=slebresne&avatarId=14630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=slebresne&avatarId=14630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=slebresne&avatarId=14630"},"displayName":"Sylvain Lebresne","active":true},"body":"Got some time to kill, so I'm proposing two (quite trivial) patches.\r\nFirst one add the SlicePredicate to get_count, second one add\r\na multiget_count.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slebresne","name":"slebresne","emailAddress":"sylvain at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=slebresne&avatarId=14630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=slebresne&avatarId=14630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=slebresne&avatarId=14630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=slebresne&avatarId=14630"},"displayName":"Sylvain Lebresne","active":true},"created":"2010-04-17T14:55:05.357+0000","updated":"2010-04-17T14:55:05.357+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446705/comment/12858916","id":"12858916","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-04-20T14:49:35.227+0000","updated":"2010-04-20T14:49:35.227+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446705/comment/12858919","id":"12858919","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"committed.  Thanks Sylvain!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-04-20T14:53:01.185+0000","updated":"2010-04-20T14:53:01.185+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446705/comment/12865512","id":"12865512","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bendiken","name":"bendiken","emailAddress":"arto dot bendiken at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arto Bendiken","active":true},"body":"Would it be possible to specify multiget_count in terms of i64 return values instead of i32, pretty please?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bendiken","name":"bendiken","emailAddress":"arto dot bendiken at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arto Bendiken","active":true},"created":"2010-05-08T23:10:33.775+0000","updated":"2010-05-08T23:11:36.363+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446705/comment/12865518","id":"12865518","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"that's a little silly, isn't it?  surely counting over 2B columns isn't a good idea in the first place...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-05-09T00:19:02.665+0000","updated":"2010-05-09T00:19:02.665+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446705/comment/12865915","id":"12865915","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bendiken","name":"bendiken","emailAddress":"arto dot bendiken at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arto Bendiken","active":true},"body":"Is it? I apologize if I have too high expectations for Cassandra, but we've already used rows with up to one hundred million columns. Problems at that scale have been mostly GC churn and compaction related, and since it appears that such issues are being worked on (CASSANDRA-1014, CASSANDRA-16, and the like), a mere one order of magnitude more doesn't seem like *too* much of a stretch for Cassandra to eventually handle on sufficiently big iron.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bendiken","name":"bendiken","emailAddress":"arto dot bendiken at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arto Bendiken","active":true},"created":"2010-05-10T20:43:56.008+0000","updated":"2010-05-10T20:43:56.008+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446705/comment/12866098","id":"12866098","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slebresne","name":"slebresne","emailAddress":"sylvain at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=slebresne&avatarId=14630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=slebresne&avatarId=14630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=slebresne&avatarId=14630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=slebresne&avatarId=14630"},"displayName":"Sylvain Lebresne","active":true},"body":"That's not really the problem of having row with more than MAX_INTEGER columns. What is silly\r\nis counting those. Counting all the columns in a row is the same than reading the whole row. Excepted\r\nthat you don't send all those columns over the network. So a call to count will never need a i64 as any \r\ncall that would need an i64 will very likely timeout. \r\nThat's the \"raison d'Ãªtre\" of this patch. You can count a huge row by paging (but it's probably a better\r\nidea to not count those huge row at all if you can afford it as even with paging this is expensive).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slebresne","name":"slebresne","emailAddress":"sylvain at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=slebresne&avatarId=14630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=slebresne&avatarId=14630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=slebresne&avatarId=14630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=slebresne&avatarId=14630"},"displayName":"Sylvain Lebresne","active":true},"created":"2010-05-11T08:56:52.206+0000","updated":"2010-05-11T08:56:52.206+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446705/comment/12866113","id":"12866113","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bendiken","name":"bendiken","emailAddress":"arto dot bendiken at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arto Bendiken","active":true},"body":"I guess it depends on your use case. We have one where each Cassandra row represents a very large set, each column name being a 20-byte SHA-1 binary hash identifying an object in that set and each such column's value being simply the empty string. As I mentioned, we've stored up to a hundred million columns per row in this manner. As each SHA-1 column takes 35.5 bytes of space in the SStables, that's a total of less than 4 gigs of disk storage for a row with 100 million columns. On the big iron we've run this on, these are not _inherently_ infeasible numbers. The limiting factor is Cassandra's implementation, not the hardware.\r\n\r\nCounting the number of objects in a given set (i.e. the number of columns in a given row) is an important operation for us. It's fine for the count to take a while, as it is still vastly (many, many orders of magnitude) faster than the infeasible alternative of directly counting the source data (also stored in Cassandra, but apart) that the set data is derived from, which would (prior to your multi_get_count patch, which does alleviate it a little) involve performing an individual get_count operation for each of hundreds of millions (soon to be billions) of distinct source rows.\r\n\r\nNow, given existing GC and SStable compaction issues that we've run into with Cassandra 0.6, we're in practice now manually sharding the larger sets into multiple rows of a size that Cassandra has less issues dealing with (on our hardware, up to 15-20 million columns per row is performing very well).\r\n\r\nt expect that as Cassandra evolves and issues are fixed, we can keep upping this, and I don't see anything inherently ridiculous about rows of the size I've mentioned. It seems a little shortsighted to place incidental limits on the protocol, but then again I suppose the protocol will have broken backwards compatibility a couple of times by the time I get around to testing 2 billion columns with some future Cassandra 1.x version - so perhaps we can revisit this in a year or two ;-)\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bendiken","name":"bendiken","emailAddress":"arto dot bendiken at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arto Bendiken","active":true},"created":"2010-05-11T09:54:07.910+0000","updated":"2010-05-11T09:54:07.910+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446705/comment/12866121","id":"12866121","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slebresne","name":"slebresne","emailAddress":"sylvain at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=slebresne&avatarId=14630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=slebresne&avatarId=14630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=slebresne&avatarId=14630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=slebresne&avatarId=14630"},"displayName":"Sylvain Lebresne","active":true},"body":"But then again, I do not even contest the fact that it could be useful to have row with billions of columns. As you mentioned, \r\nthere is a few limitations to that today but they will hopefully be lifted soon enough. I still think that, despite these current limitations,  \r\nthe sharding  of the row you already do is useful at some point (but maybe this point is 1 billion columns in your case) if only for the \r\nsake of load distribution. But that's not my point at all.\r\n\r\nMy point is that the time it takes to perform one given individual get_count() operation that count n columns is as long as the time it takes \r\nto read those n columns (from server-side at least, the only advantage of get_count() over get_slice() is that you don't send those n columns \r\nover the network). So, if n > 2 billion, it will takes a bit of time to perform this one get_count() operation, even in a year or two, even with\r\nsuper duper SSD drives and even if each column is quite small. I haven't tried (I don't have a super duper SSD drive and I don't live one \r\nor two year from now) and it's always dangerous to make assumption in the future, but I bet it will take far time than any reasonable \r\ntimeout you would want to set for your Cassandra operations. \r\n\r\nHence, the right way to count a row with 2 billions+ columns is to do multiple get_count() operations using a predicate to limit the number \r\nof counted columns by each individual get_count() operation and sum all those results client side. But then only the sum needs be a 64 bit \r\ninteger, not the result of get_count().   ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slebresne","name":"slebresne","emailAddress":"sylvain at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=slebresne&avatarId=14630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=slebresne&avatarId=14630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=slebresne&avatarId=14630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=slebresne&avatarId=14630"},"displayName":"Sylvain Lebresne","active":true},"created":"2010-05-11T10:25:57.021+0000","updated":"2010-05-11T10:25:57.021+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-744/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0g0t3:"}}